---
title: OSTEP 37 Hard Disk Drives
author: Seungil Kim
description: 디스크의 상세한 동작을 이해해보자
postSlug: OSTEP 37 Hard Disk Drives
featured: false
tags:
  - os
  - cs
pubDatetime: 2023-10-10T03:59:01+09:00
---
# OSTEP 37 Hard Disk Drives

파일 시스템 기술은 거의 대부분 하드 디스크 드라이브의 동작에 기반을 두고 개발되었다. 디스크를 관리하는 파일 시스템 소프트웨어를 구현하기 전에 디스크의 상세한 동작을 이해하는 것이 중요하다.

> 디스크에 데이터를 어떻게 저장하고 접근하는가?

## Table of Contents

## 1. 인터페이스

우선 현대 디스크 드라이브의 인터페이스부터 이해해보자. 모든 현대 드라이브의 기본적인 인터페이스는 단순하다. 드라이브는 읽고 쓸 수 있는 매우 많은 수의 섹터 (512 byte 블럭)들로 이루어져 있다. 디스크 위의 $n$개의 섹터들은 $0$부터 $n-1$까지의 이름이 붙어 있다. 그렇기 때문에 디스크를 섹터들의 배열로 볼 수 있고, $0$부터 $n-1$이 드라이브의 **주소 공간**이 된다. 

멀티 섹터 작업도 가능하다. 사실 많은 파일 시스템들이 한 번에 4KB 또는 그 이상을 읽거나 쓴다. 하지만 드라이브 제조사는 하나의 512 byte 쓰기만 *원자적*이라고 보장한다. 

디스크 드라이브 사용자들은 몇 가지 가정을 한다. 인터페이스에 명시되어 있지는 않다. (계약 불문율)

1. 드라이브의 주소 공간에서 가깝게 배치되어 있는 두 개의 블럭을 접근하는 것은, 멀리 떨어져 있는 두 개의 블럭을 접근하는 것보다 빠르다고 가정한다. 
2. 연속적인 청크의 블럭을 접근하는 것 (순차 접근) 이 가장 빠르다. 어떤 랜덤 접근 패턴보다도 매우 빠르다.

## 2. 기본 구조

먼저 **플래터(platter)** 라는 것을 살펴보자. 

원형의 딱딱한 표면을 가지고 있는 플래터에, 자기적 성질을 변형하여 데이터를 지속시킨다. 디스크는 하나 또는 그 이상의 플래터를 갖고 있으며, 각각은 2개의 표면을 갖고 있다. 이런 플래터는 대체적으로 단단한 알루미늄같은 물질로 만들어지며, **드라이브의 전원이 나가더라도 비트를 드라이브에 영구적으로 저장**하기 위해 **얇은 자성 층**이 입혀져 있다.

플래터들은 회전축(spindle) 이라는 것으로 고정되어 있다. 모터에 연결되어 있어 플래터를 일정한 속도로 회전시킨다. 회전 속도는 7200RPM ~ 15000RPM 정도이다. 만약 10000RPM의 속도로 드라이브가 회전한다면, 드라이브가 한 바퀴 회전하는 데 걸리는 시간은 6ms이다.

